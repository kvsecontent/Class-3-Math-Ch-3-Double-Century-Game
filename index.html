<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Double Century - Math Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .screen {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            animation: slideIn 0.5s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-screen {
            text-align: center;
            background: linear-gradient(45deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%);
        }

        .welcome-screen h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .welcome-screen h2 {
            color: #34495e;
            font-size: 1.5em;
            margin-bottom: 30px;
        }

        .input-group {
            margin: 20px 0;
        }

        .input-group label {
            display: block;
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .input-group input, .input-group select {
            width: 100%;
            max-width: 300px;
            padding: 15px;
            font-size: 1.1em;
            border: 3px solid #3498db;
            border-radius: 10px;
            margin: 0 auto;
            display: block;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .btn-large {
            padding: 20px 40px;
            font-size: 1.3em;
        }

        .game-menu {
            background: linear-gradient(45deg, #ff9ff3 0%, #f368e0 100%);
        }

        .game-menu h2 {
            text-align: center;
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 30px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .menu-item {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            min-height: 120px;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        .menu-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .menu-item p {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .game-screen {
            background: linear-gradient(45deg, #74b9ff 0%, #0984e3 100%);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .game-title {
            font-size: 1.8em;
            color: #2c3e50;
        }

        .score {
            background: #e17055;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
        }

        .challenge-box {
            background: linear-gradient(45deg, #fd79a8 0%, #fdcb6e 100%);
            color: #2c3e50;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .challenge-box h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .objects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .object-item {
            background: white;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s;
            border: 3px solid transparent;
            cursor: pointer;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .object-item:hover {
            border-color: #3498db;
            transform: scale(1.05);
        }

        .object-item.counted {
            background: #d5f4e6;
            border-color: #27ae60;
        }

        .snake-ladder-board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 2px;
            max-width: 500px;
            margin: 20px auto;
            aspect-ratio: 1;
        }

        .board-cell {
            background: white;
            border: 2px solid #3498db;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .board-cell:hover {
            background: #74b9ff;
            color: white;
        }

        .board-cell.ladder {
            background: #00b894;
            color: white;
        }

        .board-cell.snake {
            background: #e17055;
            color: white;
        }

        .talking-pot {
            width: 150px;
            height: 150px;
            background: linear-gradient(45deg, #fd79a8, #fdcb6e);
            border-radius: 50%;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .talking-pot:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .pot-speech {
            position: absolute;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 15px;
            border-radius: 15px;
            border: 3px solid #3498db;
            display: none;
            min-width: 120px;
            text-align: center;
            font-size: 0.4em;
        }

        .number-pair {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 3px solid #ecf0f1;
        }

        .number-pair input {
            width: 80px;
            padding: 10px;
            font-size: 1.2em;
            border: 2px solid #3498db;
            border-radius: 5px;
            text-align: center;
            margin: 0 10px;
        }

        .number-line {
            position: relative;
            height: 80px;
            background: #ecf0f1;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: center;
        }

        .number-line-scale {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .number-mark {
            font-size: 0.8em;
            font-weight: bold;
        }

        .jump-arc {
            position: absolute;
            height: 40px;
            border: 3px solid #e17055;
            border-bottom: none;
            border-radius: 50px 50px 0 0;
            cursor: pointer;
        }

        .flower-petals {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 20px auto;
        }

        .flower-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: #f39c12;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: white;
        }

        .petal {
            position: absolute;
            width: 100px;
            height: 60px;
            background: #e74c3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .petal:hover {
            background: #c0392b;
            transform: scale(1.1);
        }

        .petal input {
            width: 50px;
            text-align: center;
            border: none;
            background: transparent;
            color: white;
            font-weight: bold;
            font-size: 1em;
        }

        .petal input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .matchstick-bundles {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .bundle {
            width: 60px;
            height: 80px;
            background: #8b4513;
            border-radius: 5px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .bundle.hundred {
            background: #2c3e50;
            width: 80px;
            height: 100px;
        }

        .bundle.ten {
            background: #27ae60;
        }

        .bundle.one {
            background: #e74c3c;
            width: 15px;
            height: 60px;
        }

        .clap-snap-pat {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .sound-button {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .clap-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
        }

        .snap-btn {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
        }

        .pat-btn {
            background: linear-gradient(45deg, #45b7d1, #96c93d);
            color: white;
        }

        .sound-button:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .stones-path {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .stone {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .stone:hover {
            border-color: #3498db;
            transform: translateY(-5px);
        }

        .stone.placed {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }

        .stone input {
            width: 40px;
            text-align: center;
            border: none;
            background: transparent;
            font-weight: bold;
            font-size: 0.9em;
        }

        .discovery-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
        }

        .discovery-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .feedback {
            background: #2ecc71;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .feedback.error {
            background: #e74c3c;
        }

        .feedback.show {
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen {
                padding: 20px;
            }
            
            .welcome-screen h1 {
                font-size: 2em;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .game-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .objects-grid {
                grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            }

            .snake-ladder-board {
                max-width: 300px;
            }
            
            .board-cell {
                font-size: 0.6em;
            }

            .clap-snap-pat {
                gap: 15px;
            }

            .sound-button {
                width: 80px;
                height: 80px;
                font-size: 1.2em;
            }
        }

        @media (max-width: 480px) {
            .welcome-screen h1 {
                font-size: 1.5em;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .btn-large {
                padding: 15px 25px;
                font-size: 1.1em;
            }

            .talking-pot {
                width: 120px;
                height: 120px;
                font-size: 2.5em;
            }

            .flower-petals {
                width: 250px;
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div class="screen active welcome-screen" id="welcomeScreen">
            <h1>üèÜ Double Century</h1>
            <h2>Class 3 Mathematics - Chapter 3 - Numbers to 200</h2>
            <div class="input-group">
                <label for="studentName">Enter Your Name:</label>
                <input type="text" id="studentName" placeholder="Your Name">
            </div>
            <div class="input-group">
                <label for="studentClass">Select Your Class:</label>
                <select id="studentClass">
                    <option value="">Choose Class</option>
                    <option value="3A">Class 3A</option>
                    <option value="3B">Class 3B</option>
                    <option value="3C">Class 3C</option>
                    <option value="3D">Class 3D</option>
                </select>
            </div>
            <button class="btn btn-large" onclick="startGame()">Start Double Century Adventure! üöÄ</button>
        </div>

        <!-- Game Menu -->
        <div class="screen game-menu" id="gameMenu">
            <h2>Welcome <span id="playerName"></span>! Choose Your Math Challenge</h2>
            <div class="menu-grid">
                <div class="menu-item" onclick="showGame('estimationGame')">
                    <h3>üî¢ Object Estimation</h3>
                    <p>Count and estimate different objects like oranges, bangles, and more!</p>
                </div>
                <div class="menu-item" onclick="showGame('snakeLadderGame')">
                    <h3>üêç Snake & Ladder Quiz</h3>
                    <p>Answer questions about the snake and ladder board</p>
                </div>
                <div class="menu-item" onclick="showGame('talkingPotGame')">
                    <h3>ü´ñ Talking Pot Challenge</h3>
                    <p>Discover the pattern with the magical talking pot</p>
                </div>
                <div class="menu-item" onclick="showGame('makeHundredGame')">
                    <h3>üíØ Making Hundreds</h3>
                    <p>Find different ways to make 100 by adding numbers</p>
                </div>
                <div class="menu-item" onclick="showGame('numberLineJumpGame')">
                    <h3>ü¶ò Number Line Jumping</h3>
                    <p>Make 100 by jumping on the number line</p>
                </div>
                <div class="menu-item" onclick="showGame('fillBoxGame')">
                    <h3>üì¶ Fill the Box</h3>
                    <p>Complete equations like 60 + __ = 100</p>
                </div>
                <div class="menu-item" onclick="showGame('flowerPetalsGame')">
                    <h3>üå∏ Flower Petals</h3>
                    <p>Make each petal add up to 100</p>
                </div>
                <div class="menu-item" onclick="showGame('numberLineCompleteGame')">
                    <h3>üìè Complete Number Lines</h3>
                    <p>Fill in missing numbers on number lines</p>
                </div>
                <div class="menu-item" onclick="showGame('bundleMatchGame')">
                    <h3>ü™µ Bundle Matching</h3>
                    <p>Match numbers with matchstick bundles up to 200</p>
                </div>
                <div class="menu-item" onclick="showGame('clapSnapPatGame')">
                    <h3>üëè Clap, Snap & Pat</h3>
                    <p>Create and decode numbers using sounds</p>
                </div>
                <div class="menu-item" onclick="showGame('stonesOrderGame')">
                    <h3>ü™® Stones in Order</h3>
                    <p>Arrange numbers in correct sequence on stones</p>
                </div>
                <div class="menu-item" onclick="showGame('jumpingPatternsGame')">
                    <h3>üèÉ Jumping Patterns</h3>
                    <p>Complete number patterns by jumping</p>
                </div>
                <div class="menu-item" onclick="showGame('moreLessTableGame')">
                    <h3>üìä More & Less Tables</h3>
                    <p>Fill tables with 1 more, 1 less, 2 more, 2 less</p>
                </div>
            </div>
        </div>

        <!-- Estimation Game -->
        <div class="screen game-screen" id="estimationGame">
            <div class="game-header">
                <h2 class="game-title">üî¢ Object Estimation Challenge</h2>
                <div class="score">Score: <span id="estimationScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üéØ Estimation Mission!</h3>
                <p>Look at the objects and estimate how many there are. Then count to check!</p>
                <div id="currentObjectType">Oranges üçä</div>
            </div>

            <div class="objects-grid" id="objectsDisplay"></div>

            <div style="text-align: center; margin: 20px 0;">
                <div style="margin: 15px 0;">
                    <label>My Estimate: </label>
                    <input type="number" id="estimateInput" placeholder="?" style="width: 80px; padding: 10px; font-size: 1.2em; text-align: center;">
                </div>
                <button class="btn" onclick="submitEstimate()">Submit Estimate</button>
                <button class="btn" onclick="startCounting()">Start Counting!</button>
                <button class="btn" onclick="generateNewEstimation()">New Challenge</button>
            </div>

            <div class="discovery-section">
                <h3>Your Estimation Results:</h3>
                <p>Objects counted: <span id="objectsCountedDisplay">0</span></p>
                <p>Estimation accuracy: <span id="estimationAccuracy">0</span>%</p>
                <div id="estimationHistory"></div>
            </div>

            <div class="feedback" id="estimationFeedback"></div>
        </div>

        <!-- Snake & Ladder Game -->
        <div class="screen game-screen" id="snakeLadderGame">
            <div class="game-header">
                <h2 class="game-title">üêç Snake & Ladder Quiz</h2>
                <div class="score">Score: <span id="snakeScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üé≤ Snake & Ladder Challenge!</h3>
                <p>Study the board and answer the questions correctly</p>
            </div>

            <div class="snake-ladder-board" id="snakeLadderBoard"></div>

            <div style="text-align: center; margin: 20px 0;">
                <div id="currentQuestion" style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0; font-weight: bold;"></div>
                <input type="number" id="questionAnswer" placeholder="Your answer" style="padding: 10px; font-size: 1.2em; text-align: center; width: 100px;">
                <br><br>
                <button class="btn" onclick="checkSnakeAnswer()">Submit Answer</button>
                <button class="btn" onclick="generateSnakeQuestion()">New Question</button>
            </div>

            <div class="discovery-section">
                <h3>Board Analysis:</h3>
                <p>Questions answered: <span id="questionsAnswered">0</span></p>
                <p>Correct answers: <span id="correctAnswers">0</span></p>
                <div id="boardLearnings"></div>
            </div>

            <div class="feedback" id="snakeFeedback"></div>
        </div>

        <!-- Talking Pot Game -->
        <div class="screen game-screen" id="talkingPotGame">
            <div class="game-header">
                <h2 class="game-title">ü´ñ Talking Pot Challenge</h2>
                <div class="score">Score: <span id="potScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üîÆ Magical Talking Pot!</h3>
                <p>Tell the pot a number, and it will tell you the next number. Can you figure out the pattern?</p>
            </div>

            <div class="talking-pot" onclick="askPot()">
                ü´ñ
                <div class="pot-speech" id="potSpeech">Hello!</div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <div style="margin: 15px 0;">
                    <label>Tell the pot: </label>
                    <input type="number" id="potInput" placeholder="Enter number" style="width: 100px; padding: 10px; font-size: 1.2em; text-align: center;">
                </div>
                <button class="btn" onclick="tellPot()">Tell the Pot</button>
                <button class="btn" onclick="testPattern()">Test My Pattern</button>
            </div>

            <div class="discovery-section">
                <h3>Pattern Discovery:</h3>
                <p>Numbers tested: <span id="numbersTestedPot">0</span></p>
                <div id="potConversations"></div>
                <div id="patternChallenge" style="display: none;">
                    <h4>Pattern Test:</h4>
                    <p>If I say <span id="testNumber"></span>, what will the pot say?</p>
                    <input type="number" id="patternAnswer" placeholder="?" style="width: 80px; padding: 8px; text-align: center;">
                    <button class="btn" onclick="checkPatternAnswer()">Check</button>
                </div>
            </div>

            <div class="feedback" id="potFeedback"></div>
        </div>

        <!-- Make Hundred Game -->
        <div class="screen game-screen" id="makeHundredGame">
            <div class="game-header">
                <h2 class="game-title">üíØ Making Hundreds</h2>
                <div class="score">Score: <span id="hundredScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üéØ Find Pairs that Make 100!</h3>
                <p>Find different number pairs that add up to exactly 100</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;" id="hundredPairs"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkHundredPairs()">Check All Pairs</button>
                <button class="btn" onclick="generateHundredChallenge()">New Challenge</button>
                <button class="btn" onclick="addNewPair()">Add Another Pair</button>
            </div>

            <div class="discovery-section">
                <h3>Your Hundred Making:</h3>
                <p>Pairs attempted: <span id="pairsAttempted">0</span></p>
                <p>Correct pairs: <span id="correctPairs">0</span></p>
                <div id="hundredPatterns"></div>
            </div>

            <div class="feedback" id="hundredFeedback"></div>
        </div>

        <!-- Number Line Jump Game -->
        <div class="screen game-screen" id="numberLineJumpGame">
            <div class="game-header">
                <h2 class="game-title">ü¶ò Number Line Jumping</h2>
                <div class="score">Score: <span id="jumpScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üèÉ Jump to Make 100!</h3>
                <p>Click on the number line to make jumps that add up to exactly 100</p>
            </div>

            <div class="number-line" id="jumpingLine">
                <div class="number-line-scale">
                    <span class="number-mark">0</span>
                    <span class="number-mark">20</span>
                    <span class="number-mark">40</span>
                    <span class="number-mark">60</span>
                    <span class="number-mark">80</span>
                    <span class="number-mark">100</span>
                </div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <div style="background: white; padding: 15px; border-radius: 10px; margin: 20px 0;">
                    <h4>Current Jumps: <span id="currentJumps">None</span></h4>
                    <h4>Total: <span id="jumpTotal">0</span>/100</h4>
                </div>
                <button class="btn" onclick="checkJumpTotal()">Check Total</button>
                <button class="btn" onclick="clearJumps()">Clear Jumps</button>
                <button class="btn" onclick="newJumpChallenge()">New Challenge</button>
            </div>

            <div class="discovery-section">
                <h3>Your Jumping Patterns:</h3>
                <p>Successful combinations: <span id="successfulJumps">0</span></p>
                <div id="jumpPatterns"></div>
            </div>

            <div class="feedback" id="jumpFeedback"></div>
        </div>

        <!-- Fill Box Game -->
        <div class="screen game-screen" id="fillBoxGame">
            <div class="game-header">
                <h2 class="game-title">üì¶ Fill the Box</h2>
                <div class="score">Score: <span id="boxScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üßÆ Complete the Equations!</h3>
                <p>Fill in the missing numbers to make each equation equal 100</p>
            </div>

            <div id="boxEquations" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkBoxAnswers()">Check All Answers</button>
                <button class="btn" onclick="generateBoxChallenge()">New Equations</button>
            </div>

            <div class="discovery-section">
                <h3>Your Equation Solving:</h3>
                <p>Equations attempted: <span id="equationsAttempted">0</span></p>
                <p>Correct solutions: <span id="correctSolutions">0</span></p>
                <div id="equationPatterns"></div>
            </div>

            <div class="feedback" id="boxFeedback"></div>
        </div>

        <!-- Flower Petals Game -->
        <div class="screen game-screen" id="flowerPetalsGame">
            <div class="game-header">
                <h2 class="game-title">üå∏ Flower Petals</h2>
                <div class="score">Score: <span id="flowerScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üå∫ Make Beautiful Flowers!</h3>
                <p>Fill each petal so that the numbers in each petal pair add up to 100</p>
            </div>

            <div class="flower-petals" id="flowerDisplay">
                <div class="flower-center">100</div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkFlowerPetals()">Check Petals</button>
                <button class="btn" onclick="generateFlowerChallenge()">New Flower</button>
            </div>

            <div class="discovery-section">
                <h3>Your Flower Garden:</h3>
                <p>Flowers completed: <span id="flowersCompleted">0</span></p>
                <p>Perfect petals: <span id="perfectPetals">0</span></p>
                <div id="flowerPatterns"></div>
            </div>

            <div class="feedback" id="flowerFeedback"></div>
        </div>

        <!-- Number Line Complete Game -->
        <div class="screen game-screen" id="numberLineCompleteGame">
            <div class="game-header">
                <h2 class="game-title">üìè Complete Number Lines</h2>
                <div class="score">Score: <span id="lineScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üî¢ Fill Missing Numbers!</h3>
                <p>Complete the number lines by filling in the missing numbers</p>
            </div>

            <div id="numberLines" style="margin: 20px 0;"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkNumberLines()">Check All Lines</button>
                <button class="btn" onclick="generateLineChallenge()">New Lines</button>
            </div>

            <div class="discovery-section">
                <h3>Your Number Line Progress:</h3>
                <p>Lines completed: <span id="linesCompleted">0</span></p>
                <p>Numbers filled correctly: <span id="numbersCorrect">0</span></p>
            </div>

            <div class="feedback" id="lineFeedback"></div>
        </div>

        <!-- Bundle Match Game -->
        <div class="screen game-screen" id="bundleMatchGame">
            <div class="game-header">
                <h2 class="game-title">ü™µ Bundle Matching</h2>
                <div class="score">Score: <span id="bundleScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üîó Match Numbers with Bundles!</h3>
                <p>Connect each number with its correct matchstick bundle representation</p>
            </div>

            <div id="bundleMatching" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 20px 0;">
                <div>
                    <h4 style="text-align: center; margin-bottom: 15px;">Numbers</h4>
                    <div id="numbersToMatch"></div>
                </div>
                <div>
                    <h4 style="text-align: center; margin-bottom: 15px;">Bundle Representations</h4>
                    <div id="bundlesToMatch"></div>
                </div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkBundleMatches()">Check Matches</button>
                <button class="btn" onclick="generateBundleChallenge()">New Challenge</button>
            </div>

            <div class="discovery-section">
                <h3>Your Bundle Understanding:</h3>
                <p>Matches attempted: <span id="matchesAttempted">0</span></p>
                <p>Correct matches: <span id="correctMatches">0</span></p>
            </div>

            <div class="feedback" id="bundleFeedback"></div>
        </div>

        <!-- Clap Snap Pat Game -->
        <div class="screen game-screen" id="clapSnapPatGame">
            <div class="game-header">
                <h2 class="game-title">üëè Clap, Snap & Pat</h2>
                <div class="score">Score: <span id="cspScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üéµ Create Numbers with Sounds!</h3>
                <p>1 Clap = 100, 1 Snap = 10, 1 Pat = 1. Create the target number!</p>
                <div style="margin: 15px 0;">
                    <strong>Target Number: <span id="cspTarget">123</span></strong>
                </div>
            </div>

            <div class="clap-snap-pat">
                <button class="sound-button clap-btn" onclick="addSound('clap')">
                    <span>üëè</span>
                    <small>CLAP</small>
                    <small>(100)</small>
                </button>
                <button class="sound-button snap-btn" onclick="addSound('snap')">
                    <span>ü´∞</span>
                    <small>SNAP</small>
                    <small>(10)</small>
                </button>
                <button class="sound-button pat-btn" onclick="addSound('pat')">
                    <span>ü§ö</span>
                    <small>PAT</small>
                    <small>(1)</small>
                </button>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h4>Your Pattern: <span id="cspPattern">None</span></h4>
                    <h4>Your Number: <span id="cspResult">0</span></h4>
                </div>
                <button class="btn" onclick="checkCSPAnswer()">Check Answer</button>
                <button class="btn" onclick="clearCSPPattern()">Clear Pattern</button>
                <button class="btn" onclick="generateCSPChallenge()">New Number</button>
            </div>

            <div class="discovery-section">
                <h3>Your Sound Patterns:</h3>
                <p>Numbers created: <span id="numbersCreated">0</span></p>
                <p>Correct patterns: <span id="correctPatterns">0</span></p>
                <div id="cspHistory"></div>
            </div>

            <div class="feedback" id="cspFeedback"></div>
        </div>

        <!-- Stones Order Game -->
        <div class="screen game-screen" id="stonesOrderGame">
            <div class="game-header">
                <h2 class="game-title">ü™® Stones in Order</h2>
                <div class="score">Score: <span id="stoneScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üõ§Ô∏è Arrange the Stepping Stones!</h3>
                <p>Fill in the missing numbers to complete the number sequence</p>
            </div>

            <div class="stones-path" id="stonesPath"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkStoneOrder()">Check Order</button>
                <button class="btn" onclick="generateStoneChallenge()">New Stone Path</button>
            </div>

            <div class="discovery-section">
                <h3>Your Stone Paths:</h3>
                <p>Paths completed: <span id="pathsCompleted">0</span></p>
                <p>Stones placed correctly: <span id="stonesCorrect">0</span></p>
            </div>

            <div class="feedback" id="stoneFeedback"></div>
        </div>

        <!-- Jumping Patterns Game -->
        <div class="screen game-screen" id="jumpingPatternsGame">
            <div class="game-header">
                <h2 class="game-title">üèÉ Jumping Patterns</h2>
                <div class="score">Score: <span id="patternScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>ü¶ò Complete the Jump Patterns!</h3>
                <p>Fill in the missing numbers by following the jumping pattern</p>
                <div style="margin: 15px 0;">
                    <strong>Jump Pattern: +<span id="jumpPattern">5</span></strong>
                </div>
            </div>

            <div id="jumpingPatterns" style="margin: 20px 0;"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkJumpingPatterns()">Check Patterns</button>
                <button class="btn" onclick="generateJumpingChallenge()">New Pattern</button>
            </div>

            <div class="discovery-section">
                <h3>Your Pattern Mastery:</h3>
                <p>Patterns completed: <span id="patternsCompleted">0</span></p>
                <p>Jump accuracy: <span id="jumpAccuracy">0</span>%</p>
            </div>

            <div class="feedback" id="patternFeedback"></div>
        </div>

        <!-- More Less Table Game -->
        <div class="screen game-screen" id="moreLessTableGame">
            <div class="game-header">
                <h2 class="game-title">üìä More & Less Tables</h2>
                <div class="score">Score: <span id="tableScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üßÆ Master Number Relationships!</h3>
                <p>Complete the tables by finding numbers that are more or less than the given number</p>
            </div>

            <div style="overflow-x: auto; margin: 20px 0;">
                <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden;">
                    <thead>
                        <tr style="background: #3498db; color: white;">
                            <th style="padding: 15px; border: 2px solid #ecf0f1;">2 Less</th>
                            <th style="padding: 15px; border: 2px solid #ecf0f1;">1 Less</th>
                            <th style="padding: 15px; border: 2px solid #ecf0f1;">Number</th>
                            <th style="padding: 15px; border: 2px solid #ecf0f1;">1 More</th>
                            <th style="padding: 15px; border: 2px solid #ecf0f1;">2 More</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkTable()">Check Table</button>
                <button class="btn" onclick="generateNewTable()">New Table</button>
                <button class="btn" onclick="addTableRow()">Add Row</button>
            </div>

            <div class="discovery-section">
                <h3>Your Table Mastery:</h3>
                <p>Rows completed: <span id="rowsCompleted">0</span></p>
                <p>Accuracy rate: <span id="tableAccuracy">0</span>%</p>
            </div>

            <div class="feedback" id="tableFeedback"></div>
        </div>
    </div>

    <script>
        // Game state
        let currentGame = '';
        let playerName = '';
        let playerClass = '';
        let gameScores = {
            estimation: 0, snake: 0, pot: 0, hundred: 0, jump: 0,
            box: 0, flower: 0, line: 0, bundle: 0, csp: 0,
            stone: 0, pattern: 0, table: 0
        };

        // Game data and variables
        let currentObjects = [];
        let estimatedCount = 0;
        let actualCount = 0;
        let potConversations = [];
        let jumpClicks = [];
        let currentCSPTarget = 123;
        let cspSounds = [];
        let selectedNumber = null;
        let selectedBundle = null;
        let matches = [];

        // Utility functions
        function hideAllScreens() {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
        }

        function showScreen(screenId) {
            hideAllScreens();
            document.getElementById(screenId).classList.add('active');
        }

        function startGame() {
            const name = document.getElementById('studentName').value.trim();
            const studentClass = document.getElementById('studentClass').value;
            
            if (!name || !studentClass) {
                alert('Please enter your name and select your class!');
                return;
            }
            
            playerName = name;
            playerClass = studentClass;
            document.getElementById('playerName').textContent = name;
            showScreen('gameMenu');
        }

        function showMenu() {
            showScreen('gameMenu');
        }

        function showGame(gameId) {
            currentGame = gameId;
            showScreen(gameId);
            initializeGame(gameId);
        }

        function initializeGame(gameId) {
            switch(gameId) {
                case 'estimationGame': initEstimationGame(); break;
                case 'snakeLadderGame': initSnakeLadderGame(); break;
                case 'talkingPotGame': initTalkingPotGame(); break;
                case 'makeHundredGame': initMakeHundredGame(); break;
                case 'numberLineJumpGame': initNumberLineJumpGame(); break;
                case 'fillBoxGame': initFillBoxGame(); break;
                case 'flowerPetalsGame': initFlowerPetalsGame(); break;
                case 'numberLineCompleteGame': initNumberLineCompleteGame(); break;
                case 'bundleMatchGame': initBundleMatchGame(); break;
                case 'clapSnapPatGame': initClapSnapPatGame(); break;
                case 'stonesOrderGame': initStonesOrderGame(); break;
                case 'jumpingPatternsGame': initJumpingPatternsGame(); break;
                case 'moreLessTableGame': initMoreLessTableGame(); break;
            }
        }

        // Estimation Game Functions
        function initEstimationGame() {
            document.getElementById('estimationScore').textContent = gameScores.estimation;
            generateNewEstimation();
        }

        function generateNewEstimation() {
            const objectTypes = ['üçä', 'üíç', 'üü°', 'üßø', 'üçå', 'üî∏'];
            const objectNames = ['Oranges', 'Bangles', 'Laddoos', 'Bindis', 'Bananas', 'Barfi'];
            const randomIndex = Math.floor(Math.random() * objectTypes.length);
            const emoji = objectTypes[randomIndex];
            const name = objectNames[randomIndex];
            
            actualCount = Math.floor(Math.random() * 20) + 15;
            currentObjects = Array(actualCount).fill(emoji);
            
            document.getElementById('currentObjectType').textContent = `${name} ${emoji}`;
            document.getElementById('estimateInput').value = '';
            document.getElementById('objectsCountedDisplay').textContent = '0';
            
            const display = document.getElementById('objectsDisplay');
            display.innerHTML = '';
            
            currentObjects.forEach((obj, index) => {
                const item = document.createElement('div');
                item.className = 'object-item';
                item.innerHTML = `<div style="font-size: 1.5em;">${obj}</div>`;
                item.onclick = () => countObject(item, index);
                display.appendChild(item);
            });
        }

        function submitEstimate() {
            estimatedCount = parseInt(document.getElementById('estimateInput').value);
            if (!estimatedCount || estimatedCount < 1) {
                showFeedback('estimationFeedback', 'Please enter a valid estimate!', 'error');
                return;
            }
            showFeedback('estimationFeedback', `Great! You estimated ${estimatedCount}. Now count to check!`, 'success');
        }

        let countedObjects = 0;
        function countObject(item, index) {
            if (item.classList.contains('counted')) return;
            
            item.classList.add('counted');
            countedObjects++;
            document.getElementById('objectsCountedDisplay').textContent = countedObjects;
            
            if (countedObjects === actualCount) {
                checkEstimationAccuracy();
            }
        }

        function startCounting() {
            countedObjects = 0;
            document.querySelectorAll('.object-item').forEach(item => {
                item.classList.remove('counted');
            });
            document.getElementById('objectsCountedDisplay').textContent = '0';
            showFeedback('estimationFeedback', 'Click on each object to count!', 'success');
        }

        function checkEstimationAccuracy() {
            if (!estimatedCount) {
                showFeedback('estimationFeedback', 'Please make an estimate first!', 'error');
                return;
            }
            
            const difference = Math.abs(estimatedCount - actualCount);
            const accuracy = Math.max(0, 100 - (difference * 5));
            
            document.getElementById('estimationAccuracy').textContent = accuracy;
            
            const historyDiv = document.getElementById('estimationHistory');
            const historyItem = document.createElement('p');
            historyItem.innerHTML = `Estimated: ${estimatedCount}, Actual: ${actualCount}, Accuracy: ${accuracy}%`;
            historyDiv.appendChild(historyItem);
            
            if (accuracy >= 90) {
                showFeedback('estimationFeedback', `Excellent! Your estimate was very close! Accuracy: ${accuracy}%`, 'success');
                gameScores.estimation += 20;
            } else if (accuracy >= 70) {
                showFeedback('estimationFeedback', `Good estimate! Accuracy: ${accuracy}%`, 'success');
                gameScores.estimation += 15;
            } else {
                showFeedback('estimationFeedback', `Keep practicing! Accuracy: ${accuracy}%`, 'error');
                gameScores.estimation += 5;
            }
            
            document.getElementById('estimationScore').textContent = gameScores.estimation;
        }

        // Snake & Ladder Game Functions
        function initSnakeLadderGame() {
            createSnakeLadderBoard();
            generateSnakeQuestion();
        }

        function createSnakeLadderBoard() {
            const board = document.getElementById('snakeLadderBoard');
            board.innerHTML = '';
            
            for (let row = 0; row < 10; row++) {
                for (let col = 0; col < 10; col++) {
                    const cellNumber = row % 2 === 0 ? 
                        (10 - row) * 10 - col : 
                        (10 - row - 1) * 10 + col + 1;
                    
                    const cell = document.createElement('div');
                    cell.className = 'board-cell';
                    cell.textContent = cellNumber;
                    
                    if ([13, 27, 44, 58, 75].includes(cellNumber)) {
                        cell.classList.add('ladder');
                        cell.innerHTML += '<br>ü™ú';
                    } else if ([99, 84, 62, 37, 16].includes(cellNumber)) {
                        cell.classList.add('snake');
                        cell.innerHTML += '<br>üêç';
                    }
                    
                    board.appendChild(cell);
                }
            }
        }

        const snakeQuestions = [
            { q: "Which number will you reach if you take the ladder from 13?", a: 33, explanation: "Ladder from 13 goes to 33" },
            { q: "If you land on the snake at 99, which number will you reach?", a: 1, explanation: "Snake from 99 goes down to 1" },
            { q: "What number do you need on the die to reach the snake from 96?", a: 3, explanation: "96 + 3 = 99 (snake head)" },
            { q: "Which ladder takes you closest to 100?", a: 75, explanation: "Ladder at 75 is closest to the end" }
        ];

        let currentSnakeQuestion = 0;

        function generateSnakeQuestion() {
            currentSnakeQuestion = Math.floor(Math.random() * snakeQuestions.length);
            const question = snakeQuestions[currentSnakeQuestion];
            document.getElementById('currentQuestion').textContent = question.q;
            document.getElementById('questionAnswer').value = '';
        }

        function checkSnakeAnswer() {
            const userAnswer = parseInt(document.getElementById('questionAnswer').value);
            const correctAnswer = snakeQuestions[currentSnakeQuestion].a;
            const explanation = snakeQuestions[currentSnakeQuestion].explanation;
            
            const answeredSpan = document.getElementById('questionsAnswered');
            const correctSpan = document.getElementById('correctAnswers');
            const currentAnswered = parseInt(answeredSpan.textContent) + 1;
            answeredSpan.textContent = currentAnswered;
            
            if (userAnswer === correctAnswer) {
                const currentCorrect = parseInt(correctSpan.textContent) + 1;
                correctSpan.textContent = currentCorrect;
                showFeedback('snakeFeedback', `Correct! ${explanation}`, 'success');
                gameScores.snake += 15;
            } else {
                showFeedback('snakeFeedback', `Not quite right. ${explanation}`, 'error');
                gameScores.snake += 5;
            }
            
            document.getElementById('snakeScore').textContent = gameScores.snake;
        }

        // Talking Pot Game Functions
        function initTalkingPotGame() {
            potConversations = [];
            document.getElementById('numbersTestedPot').textContent = '0';
            document.getElementById('potConversations').innerHTML = '';
            document.getElementById('patternChallenge').style.display = 'none';
        }

        function tellPot() {
            const number = parseInt(document.getElementById('potInput').value);
            if (isNaN(number) || number < 0) {
                showFeedback('potFeedback', 'Please enter a valid number!', 'error');
                return;
            }
            
            const potResponse = number + 1;
            potConversations.push({ input: number, output: potResponse });
            
            document.getElementById('potSpeech').innerHTML = `You said ${number}<br>I say ${potResponse}`;
            document.getElementById('potSpeech').style.display = 'block';
            
            setTimeout(() => {
                document.getElementById('potSpeech').style.display = 'none';
            }, 3000);
            
            const conversationDiv = document.getElementById('potConversations');
            const convItem = document.createElement('p');
            convItem.innerHTML = `You: ${number} ‚Üí Pot: ${potResponse}`;
            conversationDiv.appendChild(convItem);
            
            document.getElementById('numbersTestedPot').textContent = potConversations.length;
            document.getElementById('potInput').value = '';
            
            if (potConversations.length >= 3) {
                document.getElementById('patternChallenge').style.display = 'block';
                const testNum = Math.floor(Math.random() * 50) + 10;
                document.getElementById('testNumber').textContent = testNum;
            }
            
            gameScores.pot += 5;
            document.getElementById('potScore').textContent = gameScores.pot;
        }

        function askPot() {
            document.getElementById('potSpeech').innerHTML = 'Tell me a number!';
            document.getElementById('potSpeech').style.display = 'block';
            setTimeout(() => {
                document.getElementById('potSpeech').style.display = 'none';
            }, 2000);
        }

        function testPattern() {
            if (potConversations.length < 3) {
                showFeedback('potFeedback', 'Test more numbers first to discover the pattern!', 'error');
                return;
            }
            document.getElementById('patternChallenge').style.display = 'block';
        }

        function checkPatternAnswer() {
            const testNumber = parseInt(document.getElementById('testNumber').textContent);
            const userAnswer = parseInt(document.getElementById('patternAnswer').value);
            const correctAnswer = testNumber + 1;
            
            if (userAnswer === correctAnswer) {
                showFeedback('potFeedback', 'Perfect! You discovered the pattern: Pot always says one more!', 'success');
                gameScores.pot += 25;
            } else {
                showFeedback('potFeedback', `Not quite right. The pot would say ${correctAnswer}. Keep observing!`, 'error');
            }
            
            document.getElementById('potScore').textContent = gameScores.pot;
        }

        // Make Hundred Game Functions
        function initMakeHundredGame() {
            generateHundredChallenge();
        }

        function generateHundredChallenge() {
            const container = document.getElementById('hundredPairs');
            container.innerHTML = '';
            
            for (let i = 0; i < 4; i++) {
                const pairDiv = document.createElement('div');
                pairDiv.className = 'number-pair';
                pairDiv.innerHTML = `
                    <h4>Pair ${i + 1}</h4>
                    <input type="number" placeholder="?" class="pair-input" data-pair="${i}" data-position="0">
                    +
                    <input type="number" placeholder="?" class="pair-input" data-pair="${i}" data-position="1">
                    = 100
                `;
                container.appendChild(pairDiv);
            }
        }

        function addNewPair() {
            const container = document.getElementById('hundredPairs');
            const pairCount = container.children.length;
            
            const pairDiv = document.createElement('div');
            pairDiv.className = 'number-pair';
            pairDiv.innerHTML = `
                <h4>Pair ${pairCount + 1}</h4>
                <input type="number" placeholder="?" class="pair-input" data-pair="${pairCount}" data-position="0">
                +
                <input type="number" placeholder="?" class="pair-input" data-pair="${pairCount}" data-position="1">
                = 100
            `;
            container.appendChild(pairDiv);
        }

        function checkHundredPairs() {
            const inputs = document.querySelectorAll('.pair-input');
            let pairsAttempted = 0;
            let correctPairs = 0;
            const pairs = {};
            
            inputs.forEach(input => {
                const pair = input.dataset.pair;
                const position = input.dataset.position;
                const value = parseInt(input.value);
                
                if (!pairs[pair]) pairs[pair] = {};
                pairs[pair][position] = value;
            });
            
            const patternsDiv = document.getElementById('hundredPatterns');
            patternsDiv.innerHTML = '<h4>Your Pairs:</h4>';
            
            Object.keys(pairs).forEach(pairKey => {
                const pair = pairs[pairKey];
                if (pair[0] !== undefined && pair[1] !== undefined) {
                    pairsAttempted++;
                    const sum = pair[0] + pair[1];
                    const isCorrect = sum === 100;
                    
                    if (isCorrect) correctPairs++;
                    
                    const pairResult = document.createElement('p');
                    pairResult.innerHTML = `${pair[0]} + ${pair[1]} = ${sum} ${isCorrect ? '‚úÖ' : '‚ùå'}`;
                    pairResult.style.color = isCorrect ? '#27ae60' : '#e74c3c';
                    patternsDiv.appendChild(pairResult);
                }
            });
            
            document.getElementById('pairsAttempted').textContent = pairsAttempted;
            document.getElementById('correctPairs').textContent = correctPairs;
            
            if (correctPairs === pairsAttempted && pairsAttempted > 0) {
                showFeedback('hundredFeedback', `Perfect! All ${correctPairs} pairs make 100!`, 'success');
                gameScores.hundred += correctPairs * 10;
            } else {
                showFeedback('hundredFeedback', `You got ${correctPairs} out of ${pairsAttempted} correct. Keep trying!`, 'error');
                gameScores.hundred += correctPairs * 5;
            }
            
            document.getElementById('hundredScore').textContent = gameScores.hundred;
        }

        // Number Line Jump Game Functions
        function initNumberLineJumpGame() {
            jumpClicks = [];
            clearJumps();
            
            // Add click event to number line
            const jumpLine = document.getElementById('jumpingLine');
            jumpLine.addEventListener('click', function(e) {
                const rect = jumpLine.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const percentage = x / rect.width;
                const value = Math.round(percentage * 100);
                
                if (value >= 0 && value <= 100) {
                    addJump(value, x);
                }
            });
        }

        function newJumpChallenge() {
            clearJumps();
        }

        function clearJumps() {
            jumpClicks = [];
            document.getElementById('jumpingLine').querySelectorAll('.jump-arc').forEach(arc => arc.remove());
            document.getElementById('currentJumps').textContent = 'None';
            document.getElementById('jumpTotal').textContent = '0';
        }

        function addJump(value, x) {
            jumpClicks.push(value);
            
            const arc = document.createElement('div');
            arc.className = 'jump-arc';
            arc.style.left = x - 20 + 'px';
            arc.style.width = '40px';
            arc.style.top = '10px';
            document.getElementById('jumpingLine').appendChild(arc);
            
            document.getElementById('currentJumps').textContent = jumpClicks.join(' + ');
            const total = jumpClicks.reduce((sum, val) => sum + val, 0);
            document.getElementById('jumpTotal').textContent = total;
        }

        function checkJumpTotal() {
            const total = jumpClicks.reduce((sum, val) => sum + val, 0);
            
            if (total === 100) {
                const successSpan = document.getElementById('successfulJumps');
                const currentSuccess = parseInt(successSpan.textContent) + 1;
                successSpan.textContent = currentSuccess;
                
                const patternsDiv = document.getElementById('jumpPatterns');
                const pattern = document.createElement('p');
                pattern.innerHTML = `‚úÖ Pattern ${currentSuccess}: ${jumpClicks.join(' + ')} = 100`;
                pattern.style.color = '#27ae60';
                patternsDiv.appendChild(pattern);
                
                showFeedback('jumpFeedback', `Excellent! Your jumps total exactly 100!`, 'success');
                gameScores.jump += 20;
            } else {
                showFeedback('jumpFeedback', `Your jumps total ${total}. Try to make exactly 100!`, 'error');
            }
            
            document.getElementById('jumpScore').textContent = gameScores.jump;
        }

        // Fill Box Game Functions
        function initFillBoxGame() {
            generateBoxChallenge();
        }

        function generateBoxChallenge() {
            const container = document.getElementById('boxEquations');
            container.innerHTML = '';
            
            const equations = [
                { a: 60, b: null, result: 100 },
                { a: null, b: 25, result: 100 },
                { a: 45, b: null, result: 100 },
                { a: null, b: 85, result: 100 },
                { a: 30, b: null, result: 100 },
                { a: null, b: 15, result: 100 }
            ];
            
            equations.forEach((eq, index) => {
                const eqDiv = document.createElement('div');
                eqDiv.className = 'number-pair';
                
                if (eq.a === null) {
                    eqDiv.innerHTML = `
                        <h4>Equation ${index + 1}</h4>
                        <input type="number" placeholder="?" class="box-input" data-equation="${index}">
                        + ${eq.b} = ${eq.result}
                    `;
                } else {
                    eqDiv.innerHTML = `
                        <h4>Equation ${index + 1}</h4>
                        ${eq.a} + 
                        <input type="number" placeholder="?" class="box-input" data-equation="${index}">
                        = ${eq.result}
                    `;
                }
                container.appendChild(eqDiv);
            });
        }

        function checkBoxAnswers() {
            const inputs = document.querySelectorAll('.box-input');
            let attempted = 0;
            let correct = 0;
            
            const equations = [
                { a: 60, b: null, result: 100, answer: 40 },
                { a: null, b: 25, result: 100, answer: 75 },
                { a: 45, b: null, result: 100, answer: 55 },
                { a: null, b: 85, result: 100, answer: 15 },
                { a: 30, b: null, result: 100, answer: 70 },
                { a: null, b: 15, result: 100, answer: 85 }
            ];
            
            const patternsDiv = document.getElementById('equationPatterns');
            patternsDiv.innerHTML = '<h4>Your Solutions:</h4>';
            
            inputs.forEach((input, index) => {
                const userAnswer = parseInt(input.value);
                const correctAnswer = equations[index].answer;
                
                if (!isNaN(userAnswer)) {
                    attempted++;
                    const isCorrect = userAnswer === correctAnswer;
                    if (isCorrect) correct++;
                    
                    const result = document.createElement('p');
                    const eq = equations[index];
                    if (eq.a === null) {
                        result.innerHTML = `${userAnswer} + ${eq.b} = ${userAnswer + eq.b} ${isCorrect ? '‚úÖ' : '‚ùå'}`;
                    } else {
                        result.innerHTML = `${eq.a} + ${userAnswer} = ${eq.a + userAnswer} ${isCorrect ? '‚úÖ' : '‚ùå'}`;
                    }
                    result.style.color = isCorrect ? '#27ae60' : '#e74c3c';
                    patternsDiv.appendChild(result);
                }
            });
            
            document.getElementById('equationsAttempted').textContent = attempted;
            document.getElementById('correctSolutions').textContent = correct;
            
            if (correct === attempted && attempted > 0) {
                showFeedback('boxFeedback', `Perfect! All ${correct} equations solved correctly!`, 'success');
                gameScores.box += correct * 8;
            } else {
                showFeedback('boxFeedback', `You solved ${correct} out of ${attempted} correctly. Keep practicing!`, 'error');
                gameScores.box += correct * 4;
            }
            
            document.getElementById('boxScore').textContent = gameScores.box;
        }

        // Flower Petals Game Functions
        function initFlowerPetalsGame() {
            generateFlowerChallenge();
        }

        function generateFlowerChallenge() {
            const container = document.getElementById('flowerDisplay');
            container.querySelectorAll('.petal').forEach(petal => petal.remove());
            
            const petalNumbers = [45, 30, 37, 60, 55, 81];
            const angles = [0, 60, 120, 180, 240, 300];
            
            petalNumbers.forEach((num, index) => {
                const petal = document.createElement('div');
                petal.className = 'petal';
                
                const angle = angles[index];
                const radius = 110;
                const x = Math.cos(angle * Math.PI / 180) * radius;
                const y = Math.sin(angle * Math.PI / 180) * radius;
                
                petal.style.left = `calc(50% + ${x}px - 50px)`;
                petal.style.top = `calc(50% + ${y}px - 30px)`;
                
                petal.innerHTML = `
                    ${num} + 
                    <input type="number" placeholder="?" class="petal-input" data-first="${num}">
                `;
                
                container.appendChild(petal);
            });
        }

        function checkFlowerPetals() {
            const inputs = document.querySelectorAll('.petal-input');
            let completed = 0;
            let perfect = 0;
            
            inputs.forEach(input => {
                const firstNumber = parseInt(input.dataset.first);
                const secondNumber = parseInt(input.value);
                
                if (!isNaN(secondNumber)) {
                    completed++;
                    const sum = firstNumber + secondNumber;
                    
                    if (sum === 100) {
                        perfect++;
                        input.parentElement.style.background = '#27ae60';
                    } else {
                        input.parentElement.style.background = '#e74c3c';
                    }
                }
            });
            
            document.getElementById('perfectPetals').textContent = perfect;
            
            if (perfect === inputs.length) {
                const flowersSpan = document.getElementById('flowersCompleted');
                const currentFlowers = parseInt(flowersSpan.textContent) + 1;
                flowersSpan.textContent = currentFlowers;
                
                const patternsDiv = document.getElementById('flowerPatterns');
                const flower = document.createElement('p');
                flower.innerHTML = `üå∏ Flower ${currentFlowers}: All petals perfect!`;
                flower.style.color = '#27ae60';
                patternsDiv.appendChild(flower);
                
                showFeedback('flowerFeedback', 'Beautiful! All petals add up to 100!', 'success');
                gameScores.flower += 25;
            } else {
                showFeedback('flowerFeedback', `${perfect} out of ${inputs.length} petals are perfect. Keep trying!`, 'error');
                gameScores.flower += perfect * 3;
            }
            
            document.getElementById('flowerScore').textContent = gameScores.flower;
        }

        // Number Line Complete Game Functions
        function initNumberLineCompleteGame() {
            generateLineChallenge();
        }

        function generateLineChallenge() {
            const container = document.getElementById('numberLines');
            container.innerHTML = '';
            
            const lineConfigs = [
                { start: 100, end: 120, step: 2, missing: [104, 108, 116] },
                { start: 125, end: 145, step: 3, missing: [128, 134, 140] },
                { start: 150, end: 170, step: 5, missing: [155, 165] }
            ];
            
            lineConfigs.forEach((config, lineIndex) => {
                const lineDiv = document.createElement('div');
                lineDiv.className = 'number-line';
                lineDiv.style.height = '60px';
                lineDiv.style.background = '#f8f9fa';
                lineDiv.style.border = '2px solid #3498db';
                lineDiv.style.margin = '15px 0';
                lineDiv.style.display = 'flex';
                lineDiv.style.alignItems = 'center';
                lineDiv.style.justifyContent = 'space-around';
                lineDiv.style.padding = '0 20px';
                
                for (let num = config.start; num <= config.end; num += config.step) {
                    const numSpan = document.createElement('span');
                    if (config.missing.includes(num)) {
                        numSpan.innerHTML = `<input type="number" class="line-input" data-answer="${num}" style="width: 50px; text-align: center; border: 1px solid #3498db;">`;
                    } else {
                        numSpan.textContent = num;
                        numSpan.style.fontWeight = 'bold';
                    }
                    lineDiv.appendChild(numSpan);
                }
                
                container.appendChild(lineDiv);
            });
        }

        function checkNumberLines() {
            const inputs = document.querySelectorAll('.line-input');
            let total = inputs.length;
            let correct = 0;
            
            inputs.forEach(input => {
                const userAnswer = parseInt(input.value);
                const correctAnswer = parseInt(input.dataset.answer);
                
                if (userAnswer === correctAnswer) {
                    correct++;
                    input.style.background = '#d5f4e6';
                    input.style.borderColor = '#27ae60';
                } else {
                    input.style.background = '#fdf2f2';
                    input.style.borderColor = '#e74c3c';
                }
            });
            
            document.getElementById('numbersCorrect').textContent = correct;
            
            if (correct === total) {
                const linesSpan = document.getElementById('linesCompleted');
                const currentLines = parseInt(linesSpan.textContent) + 1;
                linesSpan.textContent = currentLines;
                
                showFeedback('lineFeedback', 'Perfect! All number lines completed correctly!', 'success');
                gameScores.line += 30;
            } else {
                showFeedback('lineFeedback', `You got ${correct} out of ${total} numbers correct. Keep trying!`, 'error');
                gameScores.line += correct * 3;
            }
            
            document.getElementById('lineScore').textContent = gameScores.line;
        }

        // Bundle Match Game Functions
        function initBundleMatchGame() {
            generateBundleChallenge();
        }

        function generateBundleChallenge() {
            const numbers = [101, 123, 145, 167, 189];
            const numbersContainer = document.getElementById('numbersToMatch');
            const bundlesContainer = document.getElementById('bundlesToMatch');
            
            numbersContainer.innerHTML = '';
            bundlesContainer.innerHTML = '';
            
            numbers.forEach((num, index) => {
                const numCard = document.createElement('div');
                numCard.className = 'number-pair';
                numCard.style.cursor = 'pointer';
                numCard.style.margin = '10px 0';
                numCard.innerHTML = `<h3>${num}</h3>`;
                numCard.onclick = () => selectForMatching(numCard, num, 'number');
                numbersContainer.appendChild(numCard);
            });
            
            const shuffledNumbers = [...numbers].sort(() => Math.random() - 0.5);
            shuffledNumbers.forEach((num, index) => {
                const bundleCard = document.createElement('div');
                bundleCard.className = 'number-pair';
                bundleCard.style.cursor = 'pointer';
                bundleCard.style.margin = '10px 0';
                
                const hundreds = Math.floor(num / 100);
                const tens = Math.floor((num % 100) / 10);
                const ones = num % 10;
                
                const bundlesDiv = document.createElement('div');
                bundlesDiv.className = 'matchstick-bundles';
                
                for (let i = 0; i < hundreds; i++) {
                    const bundle = document.createElement('div');
                    bundle.className = 'bundle hundred';
                    bundle.textContent = '100';
                    bundlesDiv.appendChild(bundle);
                }
                
                for (let i = 0; i < tens; i++) {
                    const bundle = document.createElement('div');
                    bundle.className = 'bundle ten';
                    bundle.textContent = '10';
                    bundlesDiv.appendChild(bundle);
                }
                
                for (let i = 0; i < ones; i++) {
                    const bundle = document.createElement('div');
                    bundle.className = 'bundle one';
                    bundlesDiv.appendChild(bundle);
                }
                
                bundleCard.appendChild(bundlesDiv);
                bundleCard.onclick = () => selectForMatching(bundleCard, num, 'bundle');
                bundlesContainer.appendChild(bundleCard);
            });
        }

        function selectForMatching(card, value, type) {
            document.querySelectorAll('.number-pair').forEach(c => {
                c.style.border = '3px solid #ecf0f1';
            });
            
            card.style.border = '3px solid #3498db';
            
            if (type === 'number') {
                selectedNumber = { card, value };
            } else {
                selectedBundle = { card, value };
            }
            
            if (selectedNumber && selectedBundle) {
                if (selectedNumber.value === selectedBundle.value) {
                    selectedNumber.card.style.border = '3px solid #27ae60';
                    selectedBundle.card.style.border = '3px solid #27ae60';
                    matches.push({ number: selectedNumber.value, correct: true });
                } else {
                    selectedNumber.card.style.border = '3px solid #e74c3c';
                    selectedBundle.card.style.border = '3px solid #e74c3c';
                    matches.push({ number: selectedNumber.value, bundle: selectedBundle.value, correct: false });
                }
                
                selectedNumber = null;
                selectedBundle = null;
            }
        }

        function checkBundleMatches() {
            const attempted = matches.length;
            const correct = matches.filter(m => m.correct).length;
            
            document.getElementById('matchesAttempted').textContent = attempted;
            document.getElementById('correctMatches').textContent = correct;
            
            if (correct === 5) {
                showFeedback('bundleFeedback', 'Perfect! All numbers matched with correct bundles!', 'success');
                gameScores.bundle += 40;
            } else {
                showFeedback('bundleFeedback', `You matched ${correct} out of 5 correctly. Keep practicing!`, 'error');
                gameScores.bundle += correct * 6;
            }
            
            document.getElementById('bundleScore').textContent = gameScores.bundle;
        }

        // Clap Snap Pat Game Functions
        function initClapSnapPatGame() {
            cspSounds = [];
            generateCSPChallenge();
        }

        function generateCSPChallenge() {
            const targets = [123, 145, 167, 189, 134, 156, 178];
            currentCSPTarget = targets[Math.floor(Math.random() * targets.length)];
            document.getElementById('cspTarget').textContent = currentCSPTarget;
            clearCSPPattern();
        }

        function addSound(soundType) {
            cspSounds.push(soundType);
            updateCSPDisplay();
        }

        function updateCSPDisplay() {
            const pattern = cspSounds.map(sound => {
                switch(sound) {
                    case 'clap': return 'üëè';
                    case 'snap': return 'ü´∞';
                    case 'pat': return 'ü§ö';
                }
            }).join(' ');
            
            const total = cspSounds.reduce((sum, sound) => {
                switch(sound) {
                    case 'clap': return sum + 100;
                    case 'snap': return sum + 10;
                    case 'pat': return sum + 1;
                    default: return sum;
                }
            }, 0);
            
            document.getElementById('cspPattern').textContent = pattern || 'None';
            document.getElementById('cspResult').textContent = total;
        }

        function clearCSPPattern() {
            cspSounds = [];
            updateCSPDisplay();
        }

        function checkCSPAnswer() {
            const total = cspSounds.reduce((sum, sound) => {
                switch(sound) {
                    case 'clap': return sum + 100;
                    case 'snap': return sum + 10;
                    case 'pat': return sum + 1;
                    default: return sum;
                }
            }, 0);
            
            const createdSpan = document.getElementById('numbersCreated');
            const correctSpan = document.getElementById('correctPatterns');
            
            const currentCreated = parseInt(createdSpan.textContent) + 1;
            createdSpan.textContent = currentCreated;
            
            if (total === currentCSPTarget) {
                const currentCorrect = parseInt(correctSpan.textContent) + 1;
                correctSpan.textContent = currentCorrect;
                
                const historyDiv = document.getElementById('cspHistory');
                const historyItem = document.createElement('p');
                historyItem.innerHTML = `‚úÖ ${currentCSPTarget}: ${document.getElementById('cspPattern').textContent}`;
                historyItem.style.color = '#27ae60';
                historyDiv.appendChild(historyItem);
                
                showFeedback('cspFeedback', `Perfect! You created ${currentCSPTarget} with sounds!`, 'success');
                gameScores.csp += 20;
            } else {
                showFeedback('cspFeedback', `You made ${total}, but the target was ${currentCSPTarget}. Try again!`, 'error');
                gameScores.csp += 5;
            }
            
            document.getElementById('cspScore').textContent = gameScores.csp;
        }

        // Stones Order Game Functions
        function initStonesOrderGame() {
            generateStoneChallenge();
        }

        function generateStoneChallenge() {
            const sequences = [
                { start: 150, end: 165, step: 1, missing: [153, 157, 161] },
                { start: 170, end: 190, step: 2, missing: [174, 180, 186] },
                { start: 100, end: 125, step: 5, missing: [110, 120] }
            ];
            
            const config = sequences[Math.floor(Math.random() * sequences.length)];
            const container = document.getElementById('stonesPath');
            container.innerHTML = '';
            
            for (let num = config.start; num <= config.end; num += config.step) {
                const stone = document.createElement('div');
                stone.className = 'stone';
                
                if (config.missing.includes(num)) {
                    stone.innerHTML = `<input type="number" data-answer="${num}" style="width: 40px; text-align: center; border: none; background: transparent; font-weight: bold;">`;
                } else {
                    stone.textContent = num;
                    stone.classList.add('placed');
                }
                
                container.appendChild(stone);
            }
        }

        function checkStoneOrder() {
            const inputs = document.querySelectorAll('#stonesPath input');
            let total = inputs.length;
            let correct = 0;
            
            inputs.forEach(input => {
                const userAnswer = parseInt(input.value);
                const correctAnswer = parseInt(input.dataset.answer);
                
                if (userAnswer === correctAnswer) {
                    correct++;
                    input.parentElement.style.background = 'linear-gradient(45deg, #27ae60, #2ecc71)';
                    input.style.color = 'white';
                } else {
                    input.parentElement.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
                    input.style.color = 'white';
                }
            });
            
            document.getElementById('stonesCorrect').textContent = correct;
            
            if (correct === total) {
                const pathsSpan = document.getElementById('pathsCompleted');
                const currentPaths = parseInt(pathsSpan.textContent) + 1;
                pathsSpan.textContent = currentPaths;
                
                showFeedback('stoneFeedback', 'Excellent! All stones placed in correct order!', 'success');
                gameScores.stone += 25;
            } else {
                showFeedback('stoneFeedback', `You placed ${correct} out of ${total} stones correctly!`, 'error');
                gameScores.stone += correct * 4;
            }
            
            document.getElementById('stoneScore').textContent = gameScores.stone;
        }

        // Jumping Patterns Game Functions
        function initJumpingPatternsGame() {
            generateJumpingChallenge();
        }

        function generateJumpingChallenge() {
            const patterns = [5, 10, 2, 3];
            const currentPattern = patterns[Math.floor(Math.random() * patterns.length)];
            document.getElementById('jumpPattern').textContent = currentPattern;
            
            const container = document.getElementById('jumpingPatterns');
            container.innerHTML = '';
            
            const startNum = 100 + Math.floor(Math.random() * 50);
            const sequence = [];
            
            for (let i = 0; i < 8; i++) {
                sequence.push(startNum + (i * currentPattern));
            }
            
            const missing = [1, 3, 5, 7];
            
            const lineDiv = document.createElement('div');
            lineDiv.style.display = 'flex';
            lineDiv.style.justifyContent = 'center';
            lineDiv.style.alignItems = 'center';
            lineDiv.style.flexWrap = 'wrap';
            lineDiv.style.gap = '15px';
            lineDiv.style.background = '#f8f9fa';
            lineDiv.style.padding = '20px';
            lineDiv.style.borderRadius = '10px';
            lineDiv.style.border = '2px solid #3498db';
            
            sequence.forEach((num, index) => {
                const numSpan = document.createElement('span');
                numSpan.style.padding = '10px 15px';
                numSpan.style.minWidth = '60px';
                numSpan.style.textAlign = 'center';
                numSpan.style.border = '2px solid #ecf0f1';
                numSpan.style.borderRadius = '5px';
                numSpan.style.background = 'white';
                
                if (missing.includes(index)) {
                    numSpan.innerHTML = `<input type="number" class="pattern-input" data-answer="${num}" style="width: 50px; text-align: center; border: none; font-weight: bold;">`;
                } else {
                    numSpan.textContent = num;
                    numSpan.style.fontWeight = 'bold';
                }
                
                lineDiv.appendChild(numSpan);
            });
            
            container.appendChild(lineDiv);
        }

        function checkJumpingPatterns() {
            const inputs = document.querySelectorAll('.pattern-input');
            let total = inputs.length;
            let correct = 0;
            
            inputs.forEach(input => {
                const userAnswer = parseInt(input.value);
                const correctAnswer = parseInt(input.dataset.answer);
                
                if (userAnswer === correctAnswer) {
                    correct++;
                    input.style.background = '#d5f4e6';
                    input.style.color = '#27ae60';
                } else {
                    input.style.background = '#fdf2f2';
                    input.style.color = '#e74c3c';
                }
            });
            
            const accuracy = total > 0 ? Math.round((correct / total) * 100) : 0;
            document.getElementById('jumpAccuracy').textContent = accuracy;
            
            if (accuracy === 100) {
                const patternsSpan = document.getElementById('patternsCompleted');
                const currentPatterns = parseInt(patternsSpan.textContent) + 1;
                patternsSpan.textContent = currentPatterns;
                
                showFeedback('patternFeedback', 'Perfect! Pattern completed correctly!', 'success');
                gameScores.pattern += 30;
            } else {
                showFeedback('patternFeedback', `You got ${correct} out of ${total} correct (${accuracy}%)!`, 'error');
                gameScores.pattern += Math.floor(accuracy / 10);
            }
            
            document.getElementById('patternScore').textContent = gameScores.pattern;
        }

        // More Less Table Game Functions
        function init
