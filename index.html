<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Double Century - Math Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .screen {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            animation: slideIn 0.5s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-screen {
            text-align: center;
            background: linear-gradient(45deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%);
        }

        .welcome-screen h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .welcome-screen h2 {
            color: #34495e;
            font-size: 1.5em;
            margin-bottom: 30px;
        }

        .input-group {
            margin: 20px 0;
        }

        .input-group label {
            display: block;
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .input-group input, .input-group select {
            width: 100%;
            max-width: 300px;
            padding: 15px;
            font-size: 1.1em;
            border: 3px solid #3498db;
            border-radius: 10px;
            margin: 0 auto;
            display: block;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .btn-large {
            padding: 20px 40px;
            font-size: 1.3em;
        }

        .game-menu {
            background: linear-gradient(45deg, #ff9ff3 0%, #f368e0 100%);
        }

        .game-menu h2 {
            text-align: center;
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 30px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .menu-item {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            min-height: 120px;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        .menu-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .menu-item p {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .game-screen {
            background: linear-gradient(45deg, #74b9ff 0%, #0984e3 100%);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .game-title {
            font-size: 1.8em;
            color: #2c3e50;
        }

        .score {
            background: #e17055;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
        }

        .challenge-box {
            background: linear-gradient(45deg, #fd79a8 0%, #fdcb6e 100%);
            color: #2c3e50;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .challenge-box h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .objects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .object-item {
            background: white;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s;
            border: 3px solid transparent;
            cursor: pointer;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .object-item:hover {
            border-color: #3498db;
            transform: scale(1.05);
        }

        .object-item.counted {
            background: #d5f4e6;
            border-color: #27ae60;
        }

        .number-pair {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 3px solid #ecf0f1;
        }

        .number-pair input {
            width: 80px;
            padding: 10px;
            font-size: 1.2em;
            border: 2px solid #3498db;
            border-radius: 5px;
            text-align: center;
            margin: 0 10px;
        }

        .discovery-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
        }

        .discovery-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .feedback {
            background: #2ecc71;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .feedback.error {
            background: #e74c3c;
        }

        .feedback.show {
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen {
                padding: 20px;
            }
            
            .welcome-screen h1 {
                font-size: 2em;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .game-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .objects-grid {
                grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .welcome-screen h1 {
                font-size: 1.5em;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .btn-large {
                padding: 15px 25px;
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div class="screen active welcome-screen" id="welcomeScreen">
            <h1>üèÜ Double Century</h1>
            <h2>Class 3 Mathematics - Chapter 3 - Numbers to 200</h2>
            <div class="input-group">
                <label for="studentName">Enter Your Name:</label>
                <input type="text" id="studentName" placeholder="Your Name">
            </div>
            <div class="input-group">
                <label for="studentClass">Select Your Class:</label>
                <select id="studentClass">
                    <option value="">Choose Class</option>
                    <option value="3A">Class 3A</option>
                    <option value="3B">Class 3B</option>
                    <option value="3C">Class 3C</option>
                    <option value="3D">Class 3D</option>
                </select>
            </div>
            <button class="btn btn-large" onclick="startGame()">Start Double Century Adventure! üöÄ</button>
        </div>

        <!-- Game Menu -->
        <div class="screen game-menu" id="gameMenu">
            <h2>Welcome <span id="playerName"></span>! Choose Your Math Challenge</h2>
            <div class="menu-grid">
                <div class="menu-item" onclick="showGame('estimationGame')">
                    <h3>üî¢ Object Estimation</h3>
                    <p>Count and estimate different objects like oranges, bangles, and more!</p>
                </div>
                <div class="menu-item" onclick="showGame('makeHundredGame')">
                    <h3>üíØ Making Hundreds</h3>
                    <p>Find different ways to make 100 by adding numbers</p>
                </div>
                <div class="menu-item" onclick="showGame('numberLineJumpGame')">
                    <h3>ü¶ò Number Line Jumping</h3>
                    <p>Make 100 by jumping on the number line</p>
                </div>
                <div class="menu-item" onclick="showGame('fillBoxGame')">
                    <h3>üì¶ Fill the Box</h3>
                    <p>Complete equations like 60 + __ = 100</p>
                </div>
                <div class="menu-item" onclick="showGame('numberLineCompleteGame')">
                    <h3>üìè Complete Number Lines</h3>
                    <p>Fill in missing numbers on number lines</p>
                </div>
                <div class="menu-item" onclick="showGame('patternGame')">
                    <h3>üîÑ Number Patterns</h3>
                    <p>Complete number patterns and sequences</p>
                </div>
            </div>
        </div>

        <!-- Estimation Game -->
        <div class="screen game-screen" id="estimationGame">
            <div class="game-header">
                <h2 class="game-title">üî¢ Object Estimation Challenge</h2>
                <div class="score">Score: <span id="estimationScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üéØ Estimation Mission!</h3>
                <p>Look at the objects and estimate how many there are. Then count to check!</p>
                <div id="currentObjectType">Oranges üçä</div>
            </div>

            <div class="objects-grid" id="objectsDisplay"></div>

            <div style="text-align: center; margin: 20px 0;">
                <div style="margin: 15px 0;">
                    <label>My Estimate: </label>
                    <input type="number" id="estimateInput" placeholder="?" style="width: 80px; padding: 10px; font-size: 1.2em; text-align: center;">
                </div>
                <button class="btn" onclick="submitEstimate()">Submit Estimate</button>
                <button class="btn" onclick="startCounting()">Start Counting!</button>
                <button class="btn" onclick="generateNewEstimation()">New Challenge</button>
            </div>

            <div class="discovery-section">
                <h3>Your Estimation Results:</h3>
                <p>Objects counted: <span id="objectsCountedDisplay">0</span></p>
                <p>Estimation accuracy: <span id="estimationAccuracy">0</span>%</p>
                <div id="estimationHistory"></div>
            </div>

            <div class="feedback" id="estimationFeedback"></div>
        </div>

        <!-- Make Hundred Game -->
        <div class="screen game-screen" id="makeHundredGame">
            <div class="game-header">
                <h2 class="game-title">üíØ Making Hundreds</h2>
                <div class="score">Score: <span id="hundredScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üéØ Find Pairs that Make 100!</h3>
                <p>Find different number pairs that add up to exactly 100</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;" id="hundredPairs"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkHundredPairs()">Check All Pairs</button>
                <button class="btn" onclick="generateHundredChallenge()">New Challenge</button>
                <button class="btn" onclick="addNewPair()">Add Another Pair</button>
            </div>

            <div class="discovery-section">
                <h3>Your Hundred Making:</h3>
                <p>Pairs attempted: <span id="pairsAttempted">0</span></p>
                <p>Correct pairs: <span id="correctPairs">0</span></p>
                <div id="hundredPatterns"></div>
            </div>

            <div class="feedback" id="hundredFeedback"></div>
        </div>

        <!-- Number Line Jump Game -->
        <div class="screen game-screen" id="numberLineJumpGame">
            <div class="game-header">
                <h2 class="game-title">ü¶ò Number Line Jumping</h2>
                <div class="score">Score: <span id="jumpScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üèÉ Jump to Make 100!</h3>
                <p>Click on the number line to make jumps that add up to exactly 100</p>
            </div>

            <div style="position: relative; height: 80px; background: #ecf0f1; border-radius: 10px; margin: 20px 0; display: flex; align-items: center;" id="jumpingLine">
                <div style="position: absolute; bottom: 0; width: 100%; height: 20px; display: flex; justify-content: space-between; align-items: center; padding: 0 20px;">
                    <span style="font-size: 0.8em; font-weight: bold;">0</span>
                    <span style="font-size: 0.8em; font-weight: bold;">20</span>
                    <span style="font-size: 0.8em; font-weight: bold;">40</span>
                    <span style="font-size: 0.8em; font-weight: bold;">60</span>
                    <span style="font-size: 0.8em; font-weight: bold;">80</span>
                    <span style="font-size: 0.8em; font-weight: bold;">100</span>
                </div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <div style="background: white; padding: 15px; border-radius: 10px; margin: 20px 0;">
                    <h4>Current Jumps: <span id="currentJumps">None</span></h4>
                    <h4>Total: <span id="jumpTotal">0</span>/100</h4>
                </div>
                <button class="btn" onclick="checkJumpTotal()">Check Total</button>
                <button class="btn" onclick="clearJumps()">Clear Jumps</button>
                <button class="btn" onclick="newJumpChallenge()">New Challenge</button>
            </div>

            <div class="discovery-section">
                <h3>Your Jumping Patterns:</h3>
                <p>Successful combinations: <span id="successfulJumps">0</span></p>
                <div id="jumpPatterns"></div>
            </div>

            <div class="feedback" id="jumpFeedback"></div>
        </div>

        <!-- Fill Box Game -->
        <div class="screen game-screen" id="fillBoxGame">
            <div class="game-header">
                <h2 class="game-title">üì¶ Fill the Box</h2>
                <div class="score">Score: <span id="boxScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üßÆ Complete the Equations!</h3>
                <p>Fill in the missing numbers to make each equation equal 100</p>
            </div>

            <div id="boxEquations" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkBoxAnswers()">Check All Answers</button>
                <button class="btn" onclick="generateBoxChallenge()">New Equations</button>
            </div>

            <div class="discovery-section">
                <h3>Your Equation Solving:</h3>
                <p>Equations attempted: <span id="equationsAttempted">0</span></p>
                <p>Correct solutions: <span id="correctSolutions">0</span></p>
                <div id="equationPatterns"></div>
            </div>

            <div class="feedback" id="boxFeedback"></div>
        </div>

        <!-- Number Line Complete Game -->
        <div class="screen game-screen" id="numberLineCompleteGame">
            <div class="game-header">
                <h2 class="game-title">üìè Complete Number Lines</h2>
                <div class="score">Score: <span id="lineScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üî¢ Fill Missing Numbers!</h3>
                <p>Complete the number lines by filling in the missing numbers</p>
            </div>

            <div id="numberLines" style="margin: 20px 0;"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkNumberLines()">Check All Lines</button>
                <button class="btn" onclick="generateLineChallenge()">New Lines</button>
            </div>

            <div class="discovery-section">
                <h3>Your Number Line Progress:</h3>
                <p>Lines completed: <span id="linesCompleted">0</span></p>
                <p>Numbers filled correctly: <span id="numbersCorrect">0</span></p>
            </div>

            <div class="feedback" id="lineFeedback"></div>
        </div>

        <!-- Pattern Game -->
        <div class="screen game-screen" id="patternGame">
            <div class="game-header">
                <h2 class="game-title">üîÑ Number Patterns</h2>
                <div class="score">Score: <span id="patternScore">0</span></div>
                <button class="btn" onclick="showMenu()">‚Üê Back to Menu</button>
            </div>
            
            <div class="challenge-box">
                <h3>üß© Complete the Patterns!</h3>
                <p>Find the pattern and fill in the missing numbers</p>
                <div style="margin: 15px 0;">
                    <strong>Pattern Type: <span id="patternType">+5</span></strong>
                </div>
            </div>

            <div id="patternContainer" style="margin: 20px 0;"></div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="checkPatterns()">Check Patterns</button>
                <button class="btn" onclick="generatePatternChallenge()">New Pattern</button>
            </div>

            <div class="discovery-section">
                <h3>Your Pattern Mastery:</h3>
                <p>Patterns completed: <span id="patternsCompleted">0</span></p>
                <p>Pattern accuracy: <span id="patternAccuracy">0</span>%</p>
            </div>

            <div class="feedback" id="patternFeedback"></div>
        </div>
    </div>

    <script>
        // Game state
        let currentGame = '';
        let playerName = '';
        let playerClass = '';
        let gameScores = {
            estimation: 0, hundred: 0, jump: 0,
            box: 0, line: 0, pattern: 0
        };

        // Game data and variables
        let currentObjects = [];
        let estimatedCount = 0;
        let actualCount = 0;
        let jumpClicks = [];

        // Utility functions
        function hideAllScreens() {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
        }

        function showScreen(screenId) {
            hideAllScreens();
            document.getElementById(screenId).classList.add('active');
        }

        function startGame() {
            const name = document.getElementById('studentName').value.trim();
            const studentClass = document.getElementById('studentClass').value;
            
            if (!name || !studentClass) {
                alert('Please enter your name and select your class!');
                return;
            }
            
            playerName = name;
            playerClass = studentClass;
            document.getElementById('playerName').textContent = name;
            showScreen('gameMenu');
        }

        function showMenu() {
            showScreen('gameMenu');
        }

        function showGame(gameId) {
            currentGame = gameId;
            showScreen(gameId);
            initializeGame(gameId);
        }

        function initializeGame(gameId) {
            switch(gameId) {
                case 'estimationGame': initEstimationGame(); break;
                case 'makeHundredGame': initMakeHundredGame(); break;
                case 'numberLineJumpGame': initNumberLineJumpGame(); break;
                case 'fillBoxGame': initFillBoxGame(); break;
                case 'numberLineCompleteGame': initNumberLineCompleteGame(); break;
                case 'patternGame': initPatternGame(); break;
            }
        }

        function showFeedback(feedbackId, message, type) {
            const feedback = document.getElementById(feedbackId);
            feedback.textContent = message;
            feedback.className = `feedback ${type === 'error' ? 'error' : ''} show`;
            
            setTimeout(() => {
                feedback.classList.remove('show');
            }, 3000);
        }

        // Estimation Game Functions
        function initEstimationGame() {
            document.getElementById('estimationScore').textContent = gameScores.estimation;
            generateNewEstimation();
        }

        function generateNewEstimation() {
            const objectTypes = ['üçä', 'üíç', 'üü°', 'üßø', 'üçå', 'üî∏'];
            const objectNames = ['Oranges', 'Bangles', 'Laddoos', 'Bindis', 'Bananas', 'Barfi'];
            const randomIndex = Math.floor(Math.random() * objectTypes.length);
            const emoji = objectTypes[randomIndex];
            const name = objectNames[randomIndex];
            
            actualCount = Math.floor(Math.random() * 20) + 15;
            currentObjects = Array(actualCount).fill(emoji);
            
            document.getElementById('currentObjectType').textContent = `${name} ${emoji}`;
            document.getElementById('estimateInput').value = '';
            document.getElementById('objectsCountedDisplay').textContent = '0';
            
            const display = document.getElementById('objectsDisplay');
            display.innerHTML = '';
            
            currentObjects.forEach((obj, index) => {
                const item = document.createElement('div');
                item.className = 'object-item';
                item.innerHTML = `<div style="font-size: 1.5em;">${obj}</div>`;
                item.onclick = () => countObject(item, index);
                display.appendChild(item);
            });
        }

        function submitEstimate() {
            estimatedCount = parseInt(document.getElementById('estimateInput').value);
            if (!estimatedCount || estimatedCount < 1) {
                showFeedback('estimationFeedback', 'Please enter a valid estimate!', 'error');
                return;
            }
            showFeedback('estimationFeedback', `Great! You estimated ${estimatedCount}. Now count to check!`, 'success');
        }

        let countedObjects = 0;
        function countObject(item, index) {
            if (item.classList.contains('counted')) return;
            
            item.classList.add('counted');
            countedObjects++;
            document.getElementById('objectsCountedDisplay').textContent = countedObjects;
            
            if (countedObjects === actualCount) {
                checkEstimationAccuracy();
            }
        }

        function startCounting() {
            countedObjects = 0;
            document.querySelectorAll('.object-item').forEach(item => {
                item.classList.remove('counted');
            });
            document.getElementById('objectsCountedDisplay').textContent = '0';
            showFeedback('estimationFeedback', 'Click on each object to count!', 'success');
        }

        function checkEstimationAccuracy() {
            if (!estimatedCount) {
                showFeedback('estimationFeedback', 'Please make an estimate first!', 'error');
                return;
            }
            
            const difference = Math.abs(estimatedCount - actualCount);
            const accuracy = Math.max(0, 100 - (difference * 5));
            
            document.getElementById('estimationAccuracy').textContent = accuracy;
            
            const historyDiv = document.getElementById('estimationHistory');
            const historyItem = document.createElement('p');
            historyItem.innerHTML = `Estimated: ${estimatedCount}, Actual: ${actualCount}, Accuracy: ${accuracy}%`;
            historyDiv.appendChild(historyItem);
            
            if (accuracy >= 90) {
                showFeedback('estimationFeedback', `Excellent! Your estimate was very close! Accuracy: ${accuracy}%`, 'success');
                gameScores.estimation += 20;
            } else if (accuracy >= 70) {
                showFeedback('estimationFeedback', `Good estimate! Accuracy: ${accuracy}%`, 'success');
                gameScores.estimation += 15;
            } else {
                showFeedback('estimationFeedback', `Keep practicing! Accuracy: ${accuracy}%`, 'error');
                gameScores.estimation += 5;
            }
            
            document.getElementById('estimationScore').textContent = gameScores.estimation;
        }

        // Make Hundred Game Functions
        function initMakeHundredGame() {
            generateHundredChallenge();
        }

        function generateHundredChallenge() {
            const container = document.getElementById('hundredPairs');
            container.innerHTML = '';
            
            for (let i = 0; i < 4; i++) {
                const pairDiv = document.createElement('div');
                pairDiv.className = 'number-pair';
                pairDiv.innerHTML = `
                    <h4>Pair ${i + 1}</h4>
                    <input type="number" placeholder="?" class="pair-input" data-pair="${i}" data-position="0">
                    +
                    <input type="number" placeholder="?" class="pair-input" data-pair="${i}" data-position="1">
                    = 100
                `;
                container.appendChild(pairDiv);
            }
        }

        function addNewPair() {
            const container = document.getElementById('hundredPairs');
            const pairCount = container.children.length;
            
            const pairDiv = document.createElement('div');
            pairDiv.className = 'number-pair';
            pairDiv.innerHTML = `
                <h4>Pair ${pairCount + 1}</h4>
                <input type="number" placeholder="?" class="pair-input" data-pair="${pairCount}" data-position="0">
                +
                <input type="number" placeholder="?" class="pair-input" data-pair="${pairCount}" data-position="1">
                = 100
            `;
            container.appendChild(pairDiv);
        }

        function checkHundredPairs() {
            const inputs = document.querySelectorAll('.pair-input');
            let pairsAttempted = 0;
            let correctPairs = 0;
            const pairs = {};
            
            inputs.forEach(input => {
                const pair = input.dataset.pair;
                const position = input.dataset.position;
                const value = parseInt(input.value);
                
                if (!pairs[pair]) pairs[pair] = {};
                pairs[pair][position] = value;
            });
            
            const patternsDiv = document.getElementById('hundredPatterns');
            patternsDiv.innerHTML = '<h4>Your Pairs:</h4>';
            
            Object.keys(pairs).forEach(pairKey => {
                const pair = pairs[pairKey];
                if (pair[0] !== undefined && pair[1] !== undefined) {
                    pairsAttempted++;
                    const sum = pair[0] + pair[1];
                    const isCorrect = sum === 100;
                    
                    if (isCorrect) correctPairs++;
                    
                    const pairResult = document.createElement('p');
                    pairResult.innerHTML = `${pair[0]} + ${pair[1]} = ${sum} ${isCorrect ? '‚úÖ' : '‚ùå'}`;
                    pairResult.style.color = isCorrect ? '#27ae60' : '#e74c3c';
                    patternsDiv.appendChild(pairResult);
                }
            });
            
            document.getElementById('pairsAttempted').textContent = pairsAttempted;
            document.getElementById('correctPairs').textContent = correctPairs;
            
            if (correctPairs === pairsAttempted && pairsAttempted > 0) {
                showFeedback('hundredFeedback', `Perfect! All ${correctPairs} pairs make 100!`, 'success');
                gameScores.hundred += correctPairs * 10;
            } else {
                showFeedback('hundredFeedback', `You got ${correctPairs} out of ${pairsAttempted} correct. Keep trying!`, 'error');
                gameScores.hundred += correctPairs * 5;
            }
            
            document.getElementById('hundredScore').textContent = gameScores.hundred;
        }

        // Number Line Jump Game Functions
        function initNumberLineJumpGame() {
            jumpClicks = [];
            clearJumps();
            
            // Add click event to number line
            const jumpLine = document.getElementById('jumpingLine');
            jumpLine.addEventListener('click', function(e) {
                const rect = jumpLine.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const percentage = x / rect.width;
                const value = Math.round(percentage * 100);
                
                if (value >= 0 && value <= 100) {
                    addJump(value, x);
                }
            });
        }

        function newJumpChallenge() {
            clearJumps();
        }

        function clearJumps() {
            jumpClicks = [];
            document.getElementById('jumpingLine').querySelectorAll('.jump-arc').forEach(arc => arc.remove());
            document.getElementById('currentJumps').textContent = 'None';
            document.getElementById('jumpTotal').textContent = '0';
        }

        function addJump(value, x) {
            jumpClicks.push(value);
            
            const arc = document.createElement('div');
            arc.style.position = 'absolute';
            arc.style.height = '40px';
            arc.style.border = '3px solid #e17055';
            arc.style.borderBottom = 'none';
            arc.style.borderRadius = '50px 50px 0 0';
            arc.style.cursor = 'pointer';
            arc.style.left = x - 20 + 'px';
            arc.style.width = '40px';
            arc.style.top = '10px';
            arc.className = 'jump-arc';
            document.getElementById('jumpingLine').appendChild(arc);
            
            document.getElementById('currentJumps').textContent = jumpClicks.join(' + ');
            const total = jumpClicks.reduce((sum, val) => sum + val, 0);
            document.getElementById('jumpTotal').textContent = total;
        }

        function checkJumpTotal() {
            const total = jumpClicks.reduce((sum, val) => sum + val, 0);
            
            if (total === 100) {
                const successSpan = document.getElementById('successfulJumps');
                const currentSuccess = parseInt(successSpan.textContent) + 1;
                successSpan.textContent = currentSuccess;
                
                const patternsDiv = document.getElementById('jumpPatterns');
                const pattern = document.createElement('p');
                pattern.innerHTML = `‚úÖ Pattern ${currentSuccess}: ${jumpClicks.join(' + ')} = 100`;
                pattern.style.color = '#27ae60';
                patternsDiv.appendChild(pattern);
                
                showFeedback('jumpFeedback', `Excellent! Your jumps total exactly 100!`, 'success');
                gameScores.jump += 20;
            } else {
                showFeedback('jumpFeedback', `Your jumps total ${total}. Try to make exactly 100!`, 'error');
            }
            
            document.getElementById('jumpScore').textContent = gameScores.jump;
        }

        // Fill Box Game Functions
        function initFillBoxGame() {
            generateBoxChallenge();
        }

        function generateBoxChallenge() {
            const container = document.getElementById('boxEquations');
            container.innerHTML = '';
            
            const equations = [
                { a: 60, b: null, result: 100 },
                { a: null, b: 25, result: 100 },
                { a: 45, b: null, result: 100 },
                { a: null, b: 85, result: 100 },
                { a: 30, b: null, result: 100 },
                { a: null, b: 15, result: 100 }
            ];
            
            equations.forEach((eq, index) => {
                const eqDiv = document.createElement('div');
                eqDiv.className = 'number-pair';
                
                if (eq.a === null) {
                    eqDiv.innerHTML = `
                        <h4>Equation ${index + 1}</h4>
                        <input type="number" placeholder="?" class="box-input" data-equation="${index}">
                        + ${eq.b} = ${eq.result}
                    `;
                } else {
                    eqDiv.innerHTML = `
                        <h4>Equation ${index + 1}</h4>
                        ${eq.a} + 
                        <input type="number" placeholder="?" class="box-input" data-equation="${index}">
                        = ${eq.result}
                    `;
                }
                container.appendChild(eqDiv);
            });
        }

        function checkBoxAnswers() {
            const inputs = document.querySelectorAll('.box-input');
            let attempted = 0;
            let correct = 0;
            
            const equations = [
                { a: 60, b: null, result: 100, answer: 40 },
                { a: null, b: 25, result: 100, answer: 75 },
                { a: 45, b: null, result: 100, answer: 55 },
                { a: null, b: 85, result: 100, answer: 15 },
                { a: 30, b: null, result: 100, answer: 70 },
                { a: null, b: 15, result: 100, answer: 85 }
            ];
            
            const patternsDiv = document.getElementById('equationPatterns');
            patternsDiv.innerHTML = '<h4>Your Solutions:</h4>';
            
            inputs.forEach((input, index) => {
                const userAnswer = parseInt(input.value);
                const correctAnswer = equations[index].answer;
                
                if (!isNaN(userAnswer)) {
                    attempted++;
                    const isCorrect = userAnswer === correctAnswer;
                    if (isCorrect) correct++;
                    
                    const result = document.createElement('p');
                    const eq = equations[index];
                    if (eq.a === null) {
                        result.innerHTML = `${userAnswer} + ${eq.b} = ${userAnswer + eq.b} ${isCorrect ? '‚úÖ' : '‚ùå'}`;
                    } else {
                        result.innerHTML = `${eq.a} + ${userAnswer} = ${eq.a + userAnswer} ${isCorrect ? '‚úÖ' : '‚ùå'}`;
                    }
                    result.style.color = isCorrect ? '#27ae60' : '#e74c3c';
                    patternsDiv.appendChild(result);
                }
            });
            
            document.getElementById('equationsAttempted').textContent = attempted;
            document.getElementById('correctSolutions').textContent = correct;
            
            if (correct === attempted && attempted > 0) {
                showFeedback('boxFeedback', `Perfect! All ${correct} equations solved correctly!`, 'success');
                gameScores.box += correct * 8;
            } else {
                showFeedback('boxFeedback', `You solved ${correct} out of ${attempted} correctly. Keep practicing!`, 'error');
                gameScores.box += correct * 4;
            }
            
            document.getElementById('boxScore').textContent = gameScores.box;
        }

        // Number Line Complete Game Functions
        function initNumberLineCompleteGame() {
            generateLineChallenge();
        }

        function generateLineChallenge() {
            const container = document.getElementById('numberLines');
            container.innerHTML = '';
            
            const lineConfigs = [
                { start: 100, end: 120, step: 2, missing: [104, 108, 116] },
                { start: 125, end: 145, step: 3, missing: [128, 134, 140] },
                { start: 150, end: 170, step: 5, missing: [155, 165] }
            ];
            
            lineConfigs.forEach((config, lineIndex) => {
                const lineDiv = document.createElement('div');
                lineDiv.style.height = '60px';
                lineDiv.style.background = '#f8f9fa';
                lineDiv.style.border = '2px solid #3498db';
                lineDiv.style.margin = '15px 0';
                lineDiv.style.display = 'flex';
                lineDiv.style.alignItems = 'center';
                lineDiv.style.justifyContent = 'space-around';
                lineDiv.style.padding = '0 20px';
                lineDiv.style.borderRadius = '10px';
                
                for (let num = config.start; num <= config.end; num += config.step) {
                    const numSpan = document.createElement('span');
                    if (config.missing.includes(num)) {
                        numSpan.innerHTML = `<input type="number" class="line-input" data-answer="${num}" style="width: 50px; text-align: center; border: 1px solid #3498db; padding: 5px;">`;
                    } else {
                        numSpan.textContent = num;
                        numSpan.style.fontWeight = 'bold';
                    }
                    lineDiv.appendChild(numSpan);
                }
                
                container.appendChild(lineDiv);
            });
        }

        function checkNumberLines() {
            const inputs = document.querySelectorAll('.line-input');
            let total = inputs.length;
            let correct = 0;
            
            inputs.forEach(input => {
                const userAnswer = parseInt(input.value);
                const correctAnswer = parseInt(input.dataset.answer);
                
                if (userAnswer === correctAnswer) {
                    correct++;
                    input.style.background = '#d5f4e6';
                    input.style.borderColor = '#27ae60';
                } else {
                    input.style.background = '#fdf2f2';
                    input.style.borderColor = '#e74c3c';
                }
            });
            
            document.getElementById('numbersCorrect').textContent = correct;
            
            if (correct === total) {
                const linesSpan = document.getElementById('linesCompleted');
                const currentLines = parseInt(linesSpan.textContent) + 1;
                linesSpan.textContent = currentLines;
                
                showFeedback('lineFeedback', 'Perfect! All number lines completed correctly!', 'success');
                gameScores.line += 30;
            } else {
                showFeedback('lineFeedback', `You got ${correct} out of ${total} numbers correct. Keep trying!`, 'error');
                gameScores.line += correct * 3;
            }
            
            document.getElementById('lineScore').textContent = gameScores.line;
        }

        // Pattern Game Functions
        function initPatternGame() {
            generatePatternChallenge();
        }

        function generatePatternChallenge() {
            const patterns = [5, 10, 2, 3, 4];
            const currentPattern = patterns[Math.floor(Math.random() * patterns.length)];
            document.getElementById('patternType').textContent = `+${currentPattern}`;
            
            const container = document.getElementById('patternContainer');
            container.innerHTML = '';
            
            const startNum = 100 + Math.floor(Math.random() * 50);
            const sequence = [];
            
            for (let i = 0; i < 8; i++) {
                sequence.push(startNum + (i * currentPattern));
            }
            
            const missing = [1, 3, 5, 7];
            
            const lineDiv = document.createElement('div');
            lineDiv.style.display = 'flex';
            lineDiv.style.justifyContent = 'center';
            lineDiv.style.alignItems = 'center';
            lineDiv.style.flexWrap = 'wrap';
            lineDiv.style.gap = '15px';
            lineDiv.style.background = '#f8f9fa';
            lineDiv.style.padding = '20px';
            lineDiv.style.borderRadius = '10px';
            lineDiv.style.border = '2px solid #3498db';
            
            sequence.forEach((num, index) => {
                const numSpan = document.createElement('span');
                numSpan.style.padding = '10px 15px';
                numSpan.style.minWidth = '60px';
                numSpan.style.textAlign = 'center';
                numSpan.style.border = '2px solid #ecf0f1';
                numSpan.style.borderRadius = '5px';
                numSpan.style.background = 'white';
                
                if (missing.includes(index)) {
                    numSpan.innerHTML = `<input type="number" class="pattern-input" data-answer="${num}" style="width: 50px; text-align: center; border: none; font-weight: bold;">`;
                } else {
                    numSpan.textContent = num;
                    numSpan.style.fontWeight = 'bold';
                }
                
                lineDiv.appendChild(numSpan);
            });
            
            container.appendChild(lineDiv);
        }

        function checkPatterns() {
            const inputs = document.querySelectorAll('.pattern-input');
            let total = inputs.length;
            let correct = 0;
            
            inputs.forEach(input => {
                const userAnswer = parseInt(input.value);
                const correctAnswer = parseInt(input.dataset.answer);
                
                if (userAnswer === correctAnswer) {
                    correct++;
                    input.style.background = '#d5f4e6';
                    input.style.color = '#27ae60';
                } else {
                    input.style.background = '#fdf2f2';
                    input.style.color = '#e74c3c';
                }
            });
            
            const accuracy = total > 0 ? Math.round((correct / total) * 100) : 0;
            document.getElementById('patternAccuracy').textContent = accuracy;
            
            if (accuracy === 100) {
                const patternsSpan = document.getElementById('patternsCompleted');
                const currentPatterns = parseInt(patternsSpan.textContent) + 1;
                patternsSpan.textContent = currentPatterns;
                
                showFeedback('patternFeedback', 'Perfect! Pattern completed correctly!', 'success');
                gameScores.pattern += 30;
            } else {
                showFeedback('patternFeedback', `You got ${correct} out of ${total} correct (${accuracy}%)!`, 'error');
                gameScores.pattern += Math.floor(accuracy / 10);
            }
            
            document.getElementById('patternScore').textContent = gameScores.pattern;
        }
    </script>
</body>
</html>
